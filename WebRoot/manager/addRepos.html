<div class="form-horizontal">
	<!-- ReposName -->
    <div class="form-group">
    	<label class="control-label col-lg-3" for="name">仓库名称</label>
        <div class="col-lg-9">
        	<input type="text" class="form-control" id="name" name="name">
        </div>
    </div>
    
    <!-- info -->
    <div class="form-group">
    	<label class="control-label col-lg-3" for="info">仓库简介</label>
        <div class="col-lg-9">
        	<textarea type="text" class="form-control" id="info" name="info"/>
        </div>
    </div>

    <div class="form-group">
    	<label class="control-label col-lg-3" for="type">仓库类型</label>
        <div class="col-lg-9">
			<select class="form-control"  id="type" name="type" onchange="doSelectFS();" style="width: 100%">   
				<option value="1" selected="selected">文件管理系统</option>   
			    <option value="5">文件服务器前置</option>
			</select>
     	</div>
    </div>

    <div class="form-group">
		<div id="remoteServerDiv" style="margin-top:10px;padding-left:30px; display:none">
	    	<label>文件服务器</label>
	    	<select class="form-control" id="remoteServerProtocol" onchange="doSelectRemoteServerProtocol();" style="width:86%">   
	            <option value="ftp">FTP</option>   
	            <option value="sftp">SFTP</option>   
	            <option value="smb">SMB</option>  
	            <option value="svn">SVN</option>  
	            <option value="git">GIT</option>  
		        <option value="mxsdoc">MXSDOC</option>  
		    </select>
	        <input class="form-control" type="text" id="remoteServer"  placeholder="sftp://192.168.0.1:22;userName=test;pwd=123456;"  value="" style="margin-top:10px;width: 86%"/>
	     </div>
    </div>
    
    <div class="form-group" style="margin-top:10px;">
    	<label class="control-label col-lg-3" for="path">仓库位置</label>
        <div class="col-lg-9">
        	<input type="text" class="form-control" id="path" name="path">
        </div>
    </div>

   	<div class="form-group">
        <label style="margin-top:10px;padding-left:30px">文件存储位置
        	<span style="margin-left:20px">
				<input type="checkbox" id="reposStorageRealDocPathEnable" value="0" onclick="doSelectReposStorageRealDocPathEnable()">自定义
			</span> 
        </label>
		<div id="reposStorageRealDocPathConfig" style="padding-left:30px; display:none">
        	<input class="form-control" type="text" id="realDocPath"  placeholder="如使用默认位置，请留空！"  value="" style="width: 86%"/>
        </div>
    </div>
    
    <div class="form-group">
		<div id="remoteStorageDiv" style="margin-top:10px;padding-left:30px">
	    	<label>远程存储</label>
	    	<select class="form-control" id="remoteStorageProtocol" onchange="doSelectRemoteStorageProtocol();" style="width:86%">   
	            <option value="">无</option>  
	            <option value="ftp">FTP</option>   
	            <option value="sftp">SFTP</option>   
	            <option value="smb">SMB</option>  
	            <option value="svn">SVN</option>  
	            <option value="git">GIT</option>  
		        <option value="mxsdoc">MXSDOC</option>  
		    </select>
	 	    <div id="remoteStorageConfig" style="margin-top:10px; display:none">
	        	<input class="form-control" type="text" id="remoteStorage"  placeholder="sftp://192.168.0.1:22;userName=test;pwd=123456;"  value="" style="margin-top:10px;width: 86%"/>
	    		<label style="margin-left:1px">自动拉取<span style="margin-left:3px"><input type="checkbox" id="autoPull" value="0"></span></label>
		        <label style="margin-left:10px">强制拉取<span style="margin-left:3px"><input type="checkbox" id="autoPullForce" value="0"></span></label>
		        <label style="margin-left:10px">自动推送<span style="margin-left:3px"><input type="checkbox" id="autoPush" value="0"></span></label>
		        <label style="margin-left:10px">强制推送<span style="margin-left:3px"><input type="checkbox" id="autoPushForce" value="0"></span></label>	    		
			</div>
	     </div>
    </div>
        
    <div class="form-group">
		<div id="verCtrlDiv" style="margin-top:10px;padding-left:30px">
    		<div id="verCtrlEnablelDiv" style="margin-top:20px">
	            <label>版本管理 
	            	<span style="margin-left:5px">
	            		<input type="checkbox" id="verCtrlEnable" value="0" onclick="doSelectVerCtrlEnalbe()">
	            	</span>
	            </label>
	            <span id="showVerCtrlConfig" value="0" style="margin-left:20px;display:none" onclick="doSelectShowVerCtrlConfig()">显示高级选项</span>
			</div>

	    	<div id="verCtrlConfigDiv" style="display:none">
		    	<label style="margin-left:20px">版本仓库看类型<span id="isRemoteSetting" style="margin-left:20px"><input type="checkbox" id="isRemote" value="0" onclick="doSelectVerCtrl()">自定义</span></label>
		       	<select class="form-control" id="verCtrl" onchange="doSelectVerCtrl();" style="margin-left:20px; width: 86%">   
		        	<option value="0">无</option>   
		            <option value="1">SVN</option>   
		            <option value="2">GIT</option>   
		        </select>
			    <div id="verReposSetting" style="padding-left:45px;display:none">
					<div id="localVerRepos">
						<label>版本仓库所在目录</label>
					    <input class="form-control" type="text" id="localSvnPath"  placeholder="如使用系统默认位置，请留空！"  value="" style="width: 85%"/>
				    </div>
				   	<div id="remoteVerRepos">
						<label>版本仓库链接</label>
					    <input class="form-control" type="text" id="svnPath"  placeholder="请填写版本仓库链接！" value="" style="width: 85%"/>
					    <label>用户名</label>
					    <input class="form-control" type="text" id="svnUser"  value="" style="width: 85%"/>
					    <label>密码</label>
				        <input class="form-control" type="password" id="svnPwd" value="" style="width: 85%"/>           
				    </div>	
				</div>
			</div>
	     </div>
	       	
	     <div id="virtualDocVerCtrlDiv"  style="margin-top:10px;padding-left:30px;display:none">
	     	<label >备注版本管理<span id="isRemoteSetting1" style="margin-left:20px"><input  type="checkbox" id="isRemote1" value="0" onclick="doSelectVerCtrl1()">自定义</span></label>
		    <select class="form-control" id="verCtrl1" onchange="doSelectVerCtrl1();" style="width: 86%">   
		    	<option value="0">无</option>   
		        <option value="1">SVN</option>   
		        <option value="2">GIT</option>  
		    </select>
		    <div id="verReposSetting1" style="padding-left:45px;display:none">
				<div id="localVerRepos1">            
					<label>版本仓库所在目录</label>
				    <input class="form-control" type="text" id="localSvnPath1"  placeholder="如使用系统默认位置，请留空！" value="" style="width: 85%"/>
		        </div>
		        <div id="remoteVerRepos1">
					<label>版本仓库链接</label>
				    <input class="form-control" type="text" id="svnPath1"  placeholder="请填写版本仓库链接！" value="" style="width: 85%"/>
				    <label>用户名</label>
				    <input class="form-control" type="text" id="svnUser1"  value="" style="width: 85%"/>
				    <label>密码</label>
				    <input class="form-control" type="password" id="svnPwd1" value="" style="width: 85%"/>          
				</div>
			</div>
		</div>
	</div>        
	
	<div class="form-group">
		<div id="textSearchEnablelDiv" style="margin-top:10px;padding-left:30px;">
	            <label>全文搜索 <span style="margin-left:5px"><input type="checkbox" id="isTextSearchEnabled" value="0" onclick="doSetTextSearch()"></span></label>
		</div>
	</div>

	<div class="form-group">
		<div id="encryptEnablelDiv" style="margin-top:10px;padding-left:30px;">
	            <label>文件加密 <span style="margin-left:5px"><input type="checkbox" id="isEncryptEnabled" value="0" onclick="doSetEncryptConfirm()"></span></label>
		</div>
	</div>
	<div class="form-group">
		<div id="autoBackupEnablelDiv" style="margin-top:10px;padding-left:30px;">
	    	<label>自动备份 
	            	<span style="margin-left:5px">
	            		<input type="checkbox"id="autoBackupEnable" value="0" onclick="doSelectAutoBackupConfigEanble()">
	            	</span>
	        </label>
		</div>
			
		<div id="autoBackupConfigDiv" style="padding-left:45px;margin-top:10px;display:none">
            <label>本地备份
            	<span style="margin-left:5px">
            		<input type="checkbox" id="localBackupEnable" value="0" onclick="doSelectLocalBackupEnable()">
            	</span>
            </label>
            <div id="localBackupConfig" style="display:none">
			    <input class="form-control" type="text" id="localBackupRootPath"  placeholder="请填写备份存储路径！" value="" style="width: 85%"/>
   				<label style="margin-top:5px">备份时间</label>
	        	<select class="form-control" id="localBackupTime" style="width:85%">   
			        <option value="0">0:00</option>   
			        <option value="60">1:00</option>   
			        <option value="120">2:00</option>   
			        <option value="180">3:00</option>  
			        <option value="240">4:00</option>  
			        <option value="300">5:00</option>  
			        <option value="360">6:00</option>  
			        <option value="420">7:00</option>  
			        <option value="480">8:00</option>  
			        <option value="540">9:00</option>  
			        <option value="600">10:00</option>
			        <option value="660">11:00</option>
			        <option value="720">12:00</option>
			        <option value="780">13:00</option>
			        <option value="840">14:00</option>
			        <option value="900">15:00</option>
			        <option value="960">16:00</option>
			        <option value="1020">17:00</option>
			        <option value="1080">18:00</option>
			        <option value="1140">19:00</option>
			        <option value="1200">20:00</option>
			        <option value="1260">21:00</option>
			        <option value="1320">22:00</option>
			        <option value="1380">23:00</option>
			    </select>
				<label style="margin-top:5px">备份周期</label>
				<div>
					<span><input type="checkbox" id="localBackupWeekDay1" value="0">周一</span>
					<span style="margin-left:20px"><input type="checkbox" id="localBackupWeekDay2" value="0">周二</span>
					<span style="margin-left:20px"><input type="checkbox" id="localBackupWeekDay3" value="0">周三</span>
					<span style="margin-left:20px"><input type="checkbox" id="localBackupWeekDay4" value="0">周四</span>
					<span style="margin-left:20px"><input type="checkbox" id="localBackupWeekDay5" value="0">周五</span>
					<span style="margin-left:20px"><input type="checkbox" id="localBackupWeekDay6" value="0">周六</span>
					<span style="margin-left:20px"><input type="checkbox" id="localBackupWeekDay7" value="0">周日</span>
				</div>				    
	            <label style="margin-top:5px">本地实时备份		            	
	            	<span style="margin-left:5px">
            			<input type="checkbox" id="localRealTimeBackupEnable" value="0">
            		</span>
	            </label>		            
            </div>

			<br>

            <label style="margin-top:10px">异地备份 
            	<span style="margin-left:5px;">
            		<input type="checkbox" id="remoteBackupEnable" value="0" onclick="doSelectRemoteBackupEnable()">
            	</span>
            </label>
            <div id="remoteBackupConfig" style="display:none">
	        	<select class="form-control" id="remoteBackupStorageProtocol" onchange="doSelectRemoteBackupStorageProtocol();" style="width:85%">   
			        <option value="">无</option>
			        <option value="ftp">FTP</option>   
			        <option value="sftp">SFTP</option>   
			        <option value="smb">SMB</option>  
			        <option value="svn">SVN</option>  
			        <option value="git">GIT</option>  
			        <option value="mxsdoc">MXSDOC</option>  
			    </select>
			    <div id="remoteBackupStorageConfig" style="margin-top:10px; display:none">
	           		<input class="form-control" type="text" id="remoteBackupStorage"  placeholder="ftp://192.168.0.1:21;userName=test;pwd=123456"  value="" style="width:85%"/>
    				<label style="margin-top:5px">备份时间</label>
		        	<select class="form-control" id="remoteBackupTime" style="width:85%">   
				        <option value="0">0:00</option>   
				        <option value="60">1:00</option>   
				        <option value="120">2:00</option>   
				        <option value="180">3:00</option>  
				        <option value="240">4:00</option>  
				        <option value="300">5:00</option>  
				        <option value="360">6:00</option>  
				        <option value="420">7:00</option>  
				        <option value="480">8:00</option>  
				        <option value="540">9:00</option>  
				        <option value="600">10:00</option>
				        <option value="660">11:00</option>
				        <option value="720">12:00</option>
				        <option value="780">13:00</option>
				        <option value="840">14:00</option>
				        <option value="900">15:00</option>
				        <option value="960">16:00</option>
				        <option value="1020">17:00</option>
				        <option value="1080">18:00</option>
				        <option value="1140">19:00</option>
				        <option value="1200">20:00</option>
				        <option value="1260">21:00</option>
				        <option value="1320">22:00</option>
				        <option value="1380">23:00</option>
				    </select>
					<label style="margin-top:5px">备份周期</label>
					<div>
						<span><input type="checkbox" id="remoteBackupWeekDay1" value="0">周一</span>
						<span style="margin-left:20px"><input type="checkbox" id="remoteBackupWeekDay2" value="0">周二</span>
						<span style="margin-left:20px"><input type="checkbox" id="remoteBackupWeekDay3" value="0">周三</span>
						<span style="margin-left:20px"><input type="checkbox" id="remoteBackupWeekDay4" value="0">周四</span>
						<span style="margin-left:20px"><input type="checkbox" id="remoteBackupWeekDay5" value="0">周五</span>
						<span style="margin-left:20px"><input type="checkbox" id="remoteBackupWeekDay6" value="0">周六</span>
						<span style="margin-left:20px"><input type="checkbox" id="remoteBackupWeekDay7" value="0">周日</span>
					</div>

		            <label style="margin-top:5px">异地实时备份
		            	<span style="margin-left:5px">
	            			<input type="checkbox" id="remoteRealTimeBackupEnable" value="0">
	            		</span>
	            	</label>		      
	            </div>      
            </div>
		</div>
	</div>	
	        
    <!-- Buttons -->
    <div class="form-group">
        	<div class="col-lg-offset-9 col-lg-2">
            	<button type="submit" class="btn btn-success" id="btn_addRepos" onclick="addRepos()">添加</button>
            </div>
    </div>
 </div>
 
<script type="text/javascript" src="js/remoteStorageCommon.js"></script>
<script type="text/javascript">
	//页面初始化代码    
	$(function(){
		console.log("addRepos Page init");
		AddReposPageInit();
		$("#name").click().focus();
	});
	
	function AddReposPageInit()
	{
		console.log("addReposPageInit()");
		EnterKeyListenerForAddRepos();
		
        var defaultReposStorePath =  gDocSysConfig.defaultReposStorePath;
        var defaultLocalVerReposStorePath =  defaultReposStorePath + "DocSysVerReposes/";

        $("#path").val(defaultReposStorePath);
        
		doSelectFS();
		
        $("#localSvnPath").val(defaultLocalVerReposStorePath);	//local VersionRepos Path
        $("#svnPath").val("");	//置空
        $("#svnUser").val("");
		$("#svnPwd").val("");
        $("#localSvnPath1").val(defaultLocalVerReposStorePath);	//local VersionRepos Path
        $("#svnPath1").val("");	//置空
        $("#svnUser1").val("");
		$("#svnPwd1").val("");
	}
	
	function showAddReposModal(text){
		$(".addReposModal").fadeIn("slow");
		$("#name").focus();
	}
	
	function closeAddReposModal(){
		$(".addReposModal").fadeOut("slow");
	}
	
	//回车键监听函数
	function EnterKeyListenerForAddRepos(){
		console.log("start enter key listener");
		var event=arguments.callee.caller.arguments[0]||window.event;//消除浏览器差异  
	 	if (event.keyCode == 13){  
	 		addRepos();
	 	}  
	}
	
	function addRepos(){
		console.log("addRepos()");

		var name = $("#name").val();
	    var info = $("#info").val();
		var path = $("#path").val();
	    var realDocPath = $("#realDocPath").val();	//realDocPath

	    var isTextSearchEnabled = $("#isTextSearchEnabled").is(':checked')? 1: 0;
	    var encryptType = $("#isEncryptEnabled").is(':checked')? 1: 0;
	    var autoBackupConfig = getAutoBackupConfig();	//autoBackupConfig
	    console.log("autoBackupConfig = " + autoBackupConfig);
	    
	    //Virtual Doc Version Control
	    var verCtrl1 = $("#verCtrl1").val();
	    var isRemote1 = $("#isRemote1").is(':checked')? 1: 0;
	    var localSvnPath1 = $("#localSvnPath1").val();
	    var svnPath1 = $("#svnPath1").val();
	    var svnUser1 = $("#svnUser1").val();
	    var svnPwd1 = $("#svnPwd1").val();
		if(isRemote1 == 0)
		{
			localSvnPath1 =   path + "DocSysVerReposes/";        		
		}
	    
		//前置服务器
	    var remoteServer = "";
	    //远程存储
		var remoteStorage = "";
	    //版本管理
	    var verCtrl = "";
	    var isRemote = 0;
	    var localSvnPath = "";
	    var svnPath = "";
	    var svnUser = "";
	    var svnPwd = "";
		
	    var type = $("#type").val();
	    if(type == 1)
	    {
	    	remoteStorage = getRemoteStorageConfig();	    
		    
		    verCtrl = $("#verCtrl").val();
		    isRemote = $("#isRemote").is(':checked')? 1: 0;
		    localSvnPath = $("#localSvnPath").val();
		    svnPath = $("#svnPath").val();
		    svnUser = $("#svnUser").val();
		    svnPwd = $("#svnPwd").val();
			if(isRemote == 0)
			{
				localSvnPath =   path + "DocSysVerReposes/";
			}			
	    }
	    else
	    {
	    	remoteServer = getRemoteServerConfig();	//remoteServer
	    }
	    
	    var createTime = new Date().getTime();	//获取时间戳
	    
	    //alert("仓库名："+ name + " 仓库类型：" + type + " 仓库路径：" + path + " 仓库描述：" + info + " svnPath:" + svnPath + " svnUser:" + svnUser + " 创建时间：" + createTime);
		if(!name)
		{
	    	alert("仓库名不能为空！");
	    	return false;
		}
		if(!info)
		{
	    	alert("仓库简介不能为空！");
	    	return false;
		}
		if(!path)
		{
	    	alert("仓库存储路径不能为空！");
	    	return false;
		}
		

	    
	    console.log(name,info,path,type);
	    
        $.ajax({
            url : "/DocSystem/Repos/addRepos.do",
            type : "post",
            dataType : "json",
            data : {
                 name : name,
                 info : info,
                 path : path,
                 type : type,
	             realDocPath: realDocPath,
	             remoteServer: remoteServer,
	             remoteStorage: remoteStorage,
	             verCtrl: verCtrl,
	             isRemote: isRemote,
	             localSvnPath: localSvnPath,
	             svnPath: svnPath,
	             svnUser: svnUser,
	             svnPwd: svnPwd,
	             verCtrl1: verCtrl1,
	             isRemote1: isRemote1,
	             localSvnPath1: localSvnPath1,
	             svnPath1: svnPath1,
	             svnUser1: svnUser1,
	             svnPwd1: svnPwd1,
	             createTime:createTime,
	             isTextSearchEnabled: isTextSearchEnabled,       
	             encryptType: encryptType,
	             autoBackup : autoBackupConfig,	 	             
            },
            success : function (ret) {
                if( "ok" == ret.status ){
                	showReposList();	//刷新ReposList
                	alert("新增成功");
                }else {
                	alert("错误：" + ret.msgInfo);
                }
            },
            error : function () {
            	alert("服务器异常:新增失败");
            }
        });
	}
	
	function doSelectFS()
	{
		var type = $("#type").val();
		console.log("doSelectFS type:" + type);
		if(type == 1 || type == 2)
		{
			$("#remoteServerDiv").hide();
			$("#remoteStorageDiv").show();
			$("#verCtrlDiv").show();
		}
		else
		{
			$("#remoteServerDiv").show();
			$("#remoteStorageDiv").hide();
			$("#verCtrlDiv").hide();
		}		
	}
	
	/** 文件存储位置设置 **/
	function doSelectReposStorageRealDocPathEnable()
	{
		var reposStorageRealDocPathEnable = $("#reposStorageRealDocPathEnable").is(':checked')? 1: 0;
		console.log("doSelectReposStorageRealDocPathEnable reposStorageRealDocPathEnable:" + reposStorageRealDocPathEnable);
		if(reposStorageRealDocPathEnable == 0)
		{
			$("#reposStorageRealDocPathConfig").hide();
		}
		else
		{	
			$("#reposStorageRealDocPathConfig").show();
		}
	}
	
	/** 版本管理设置 **/
	function doSelectVerCtrlEnalbe()
	{
		var verCtrlEnable = $("#verCtrlEnable").is(':checked')? 1: 0;
		console.log("doSelectVerCtrlEnalbe verCtrlEnable:" + verCtrlEnable);
		if(verCtrlEnable == 0)
		{
			$("#verCtrl").get(0).selectedIndex=0;	//关闭verCtrl

			$("#verCtrlConfigDiv").hide();		//隐藏 高级选项
			
			$("#showVerCtrlConfig").hide();	//隐藏 高级选项提示
			$("#showVerCtrlConfig").val(0);
			$("#showVerCtrlConfig").text("显示高级选项");
		}
		else
		{	
			if($("#verCtrl").val() == 0)	//设置版本控制为GIT
			{
				$("#verCtrl").get(0).selectedIndex=2;
			}
			
			$("#verCtrlConfigDiv").hide();			//隐藏 高级选项
			
			$("#showVerCtrlConfig").show();		//显示 高级选项提示
			$("showVerCtrlConfig").val(0);
			$("#showVerCtrlConfig").text("显示高级选项");						
		}
		
		doSelectVerCtrl();
	}

	function doSelectShowVerCtrlConfig()
	{
		var showVerCtrlConfig = $("#showVerCtrlConfig").val();
		console.log("doSelectShowVerCtrlConfig showVerCtrlConfig:" + showVerCtrlConfig);
		if(showVerCtrlConfig == 0)
		{
			$("#showVerCtrlConfig").val(1);
			$("#showVerCtrlConfig").text("隐藏高级选项");
			$("#verCtrlConfigDiv").show();			
		}
		else
		{
			$("#showVerCtrlConfig").val(0);
			$("#showVerCtrlConfig").text("显示高级选项");
			$("#verCtrlConfigDiv").hide();						
		}
	}	

	function doSelectVerCtrl()
	{
		console.log("doSelectVerCtrl ");
		
		var verCtrl = $("#verCtrl").val();
		var isRemote = $("#isRemote").is(':checked')? 1: 0;
		
		//alert(verCtrl);
		if(verCtrl != 0) 			//show verRepos info
		{
			if(isRemote == 0)
			{
				$("#localVerRepos").hide();
				$("#remoteVerRepos").hide();
			}
			else
			{
				if(verCtrl == 1)
				{
					$("#localVerRepos").hide();
				}
				else
				{
					$("#localVerRepos").show();					
				}
				$("#remoteVerRepos").show();				
			}
			$("#isRemoteSetting").show();
			$("#verReposSetting").show();				
		}
		else	//hide verRepos info
		{
			$("#isRemoteSetting").hide();
			$("#verReposSetting").hide();				
		}   
	}
	
	//According verCtrl1 value to disale the svnPath1 or not
	function doSelectVerCtrl1()
	{
		console.log("doSelectVerCtrl1");
		var verCtrl = $("#verCtrl1").val();
		var isRemote = $("#isRemote1").is(':checked')? 1: 0;

		if(verCtrl != 0) 			//show verRepos info
		{
			if(isRemote == 0)
			{
				$("#localVerRepos1").hide();
				$("#remoteVerRepos1").hide();
			}
			else
			{
				if(verCtrl == 1)
				{
					$("#localVerRepos1").hide();
				}
				else
				{
					$("#localVerRepos1").show();
				}
				$("#remoteVerRepos1").show();				
			}
			$("#isRemoteSetting1").show();
			$("#verReposSetting1").show();				
		}
		else	//hide verRepos info
		{
			$("#isRemoteSetting1").hide();
			$("#verReposSetting1").hide();				
		}     
	}
	
	function doSetEncryptConfirm()
	{
		var en = $("#isEncryptEnabled").is(':checked')? 1: 0;
		if(en == 1)
		{
			qiao.bs.confirm({
		        id: 'setEncryptConfirm',
		        msg: '仓库文件将被加密存储，密钥一旦丢失将导致文件无法恢复，是否加密？',
		    },function(){
		    	//确认
		    	$("#isEncryptEnabled").attr("checked","checked");
		    },function(){
				//取消
		    	$("#isEncryptEnabled").attr("checked",false);			
		    });
		}
	}
	
	/**** 服务器前置 ***/
	function doSelectRemoteServerProtocol()
	{
		var protocol = $("#remoteServerProtocol").val();
		console.log("doSelectRemoteServerProtocol protocol:" + protocol);
		if(protocol == undefined || protocol == "")
		{
			$("#remoteServerConfig").hide();
			return;
		}
		
		var placehoder = getPlacehoderForRemoteStorageProtocol(protocol);
		$("#remoteServer").attr('placeholder', placehoder);
		$("#remoteServerConfig").show();		
	}
	
	function getRemoteServerConfig()
	{   
		var protocol = $("#remoteServerProtocol").val();
		console.log("getRemoteServerConfig protocol:" + protocol);
		if(protocol == undefined || protocol == "")
		{
			return "";
		}
		
		var prefix = "";
		switch(protocol)
		{
		case "svn":
			prefix = "svn://";
			break;
		case "git":
			prefix = "git://";
			break;
		case "mxsdoc":
			prefix = "mxsdoc://";
			break;
		}
		
	    var remoteServer = $("#remoteServer").val();	//remoteServer
	    if(remoteServer != undefined && remoteServer != "")
		{
	    	remoteServer = prefix + remoteServer;
		}
	    console.log("getRemoteStorageConfig remoteServer:" + remoteServer);
		return remoteServer;
	}	

	/**** 远程存储 ***/
	function doSelectRemoteStorageProtocol()
	{
		var protocol = $("#remoteStorageProtocol").val();
		console.log("doSelectRemoteStorageProtocol protocol:" + protocol);
		if(protocol == undefined || protocol == "")
		{
			$("#remoteStorageConfig").hide();
			return;
		}
		
		var placehoder = getPlacehoderForRemoteStorageProtocol(protocol);
		$("#remoteStorage").attr('placeholder', placehoder);
		$("#remoteStorageConfig").show();
	}
	
	function getRemoteStorageConfig()
	{   
		var protocol = $("#remoteStorageProtocol").val();
		console.log("getRemoteStorageConfig protocol:" + protocol);
		if(protocol == undefined || protocol == "")
		{
			return "";
		}
		
		var prefix = "";
		switch(protocol)
		{
		case "svn":
			prefix = "svn://";
			break;
		case "git":
			prefix = "git://";
			break;
		}
		
	    var remoteStorage = $("#remoteStorage").val();	//remoteStorage
		var autoPull = $("#autoPull").is(':checked')? 1: 0;
		var autoPullForce = $("#autoPullForce").is(':checked')? 1: 0;
		var autoPush = $("#autoPush").is(':checked')? 1: 0;
		var autoPushForce = $("#autoPushForce").is(':checked')? 1: 0;
	    if(remoteStorage != undefined && remoteStorage != "")
		{
	    	remoteStorage += ";autoPull=" + autoPull + ";autoPullForce=" + autoPullForce + ";autoPush=" + autoPush + ";autoPushForce=" + autoPushForce;
			remoteStorage = prefix + remoteStorage;
		}
	    console.log("getRemoteStorageConfig remoteStorage:" + remoteStorage);
		return remoteStorage;
	}
	
	/********* 自动备份 *****************/
	function doSelectAutoBackupConfigEanble()
	{
		var autoBackupEnable = $("#autoBackupEnable").is(':checked')? 1: 0;
		console.log("doSelectAutoBackupConfigEanble autoBackupEnable:" + autoBackupEnable);
		if(autoBackupEnable == 0)
		{
			$("#autoBackupConfigDiv").hide();
		}
		else
		{	
			$("#autoBackupConfigDiv").show();
		}		
	}
	
	function doSelectLocalBackupEnable()
	{
		var localBackupEnable = $("#localBackupEnable").is(':checked')? 1: 0;
		console.log("doSelectLocalBackupEnable localBackupEnable:" + localBackupEnable);
		if(localBackupEnable == 0)
		{
			$("#localBackupConfig").hide();
		}
		else
		{	
			$("#localBackupConfig").show();
		}		
	}
	
	function doSelectRemoteBackupEnable()
	{
		var remoteBackupEnable = $("#remoteBackupEnable").is(':checked')? 1: 0;
		console.log("doSelectRemoteBackupEnable remoteBackupEnable:" + remoteBackupEnable);
		if(remoteBackupEnable == 0)
		{
			$("#remoteBackupConfig").hide();
		}
		else
		{	
			$("#remoteBackupConfig").show();
		}		
	}
	
	function doSelectRemoteBackupStorageProtocol()
	{
		var protocol = $("#remoteBackupStorageProtocol").val();
		console.log("doSelectRemoteBackupStorageProtocol protocol:" + protocol);
		if(protocol == undefined || protocol == "")
		{
			$("#remoteBackupStorageConfig").hide();
			return;
		}

		switch(protocol)
		{
		case "ftp":
			$("#remoteBackupStorage").attr('placeholder','ftp://192.168.0.1:21/path;userName=test;pwd=123456;');
			break;
		case "sftp":
			$("#remoteBackupStorage").attr('placeholder','sftp://192.168.0.1:22/path;userName=test;pwd=123456;');
			break;
		case "smb":
			$("#remoteBackupStorage").attr('placeholder','smb://192.168.0.1/path;userName=test;pwd=123456;');
			break;
		case "svn":
			$("#remoteBackupStorage").attr('placeholder','http://gitee.com/SvnRepos/path;userName=test;pwd=123456;');
			break;
		case "git":
			$("#remoteBackupStorage").attr('placeholder','http://gitee.com/GitRepos;userName=test;pwd=123456;');
			break;
		case "mxsdoc":
			$("#remoteBackupStorage").attr('placeholder','http://dw.gofreeteam.com;reposId=1;rootPath=/path;userName=test;pwd=123456;');
			break;
		}
		$("#remoteBackupStorageConfig").show();
	}
	
	
	function getAutoBackupConfig()
	{   
		var autoBackupEnable = $("#autoBackupEnable").is(':checked')? 1: 0;
		console.log("getAutoBackupConfig autoBackupEnable:" + autoBackupEnable);
		if(autoBackupEnable == 0)
		{
			return "{localBackup:{},remoteBackup:{}}";
		}
		
		var localBackupConfig = getLocalBackupConfig();
		var remoteBackupConfig = getRemoteBackupConfig();
		return "{localBackup:" + localBackupConfig + ",remoteBackup:" + remoteBackupConfig + "}";
	}
		
	function getLocalBackupConfig()
	{
		var localBackupEnable = $("#localBackupEnable").is(':checked')? 1: 0;
		console.log("getLocalBackupConfig localBackupEnable:" + localBackupEnable);
		if(localBackupEnable == 0)
		{
			return "{}";
		}
		
		var localRootPath = $("#localBackupRootPath").val();
		if(localRootPath == undefined || localRootPath == "")
		{
			return "{}";
		}

		var backupTime = $("#localBackupTime").val();;
	    var weekDay1 = $("#localBackupWeekDay1").is(':checked')? 1: 0;
	    var weekDay2 = $("#localBackupWeekDay2").is(':checked')? 1: 0;
	    var weekDay3 = $("#localBackupWeekDay3").is(':checked')? 1: 0;
	    var weekDay4 = $("#localBackupWeekDay4").is(':checked')? 1: 0;
	    var weekDay5 = $("#localBackupWeekDay5").is(':checked')? 1: 0;
	    var weekDay6 = $("#localBackupWeekDay6").is(':checked')? 1: 0;
	    var weekDay7 = $("#localBackupWeekDay7").is(':checked')? 1: 0;
	    var realTimeBackup = $("#localRealTimeBackupEnable").is(':checked')? 1: 0;

		var localBackupConfig = 
		"{" +
			"backupTime:" + backupTime + "," +
			"weekDay1:" + weekDay1 +"," + 
			"weekDay2:" + weekDay2 +"," + 
			"weekDay3:" + weekDay3 +"," + 
			"weekDay4:" + weekDay4 +"," + 
			"weekDay5:" + weekDay5 +"," + 
			"weekDay6:" + weekDay6 +"," + 
			"weekDay7:" + weekDay7 +"," + 
			"realTimeBackup:" + realTimeBackup + "," +
			"localRootPath:\"" + localRootPath + "\"" +
		"}";
		return localBackupConfig;
	}
	
	function getRemoteBackupConfig()
	{
		var remoteBackupEnable = $("#remoteBackupEnable").is(':checked')? 1: 0;
		console.log("getRemoteBackupConfig remoteBackupEnable:" + remoteBackupEnable);
		if(remoteBackupEnable == 0)
		{
			return "{}";
		}
		
		var remoteStorage = getRemoteBackupRemoteStorageConfig();
		if(remoteStorage == "")
		{
			return "{}";
		}
		
		var backupTime = $("#remoteBackupTime").val();
	    var weekDay1 = $("#remoteBackupWeekDay1").is(':checked')? 1: 0;
	    var weekDay2 = $("#remoteBackupWeekDay2").is(':checked')? 1: 0;
	    var weekDay3 = $("#remoteBackupWeekDay3").is(':checked')? 1: 0;
	    var weekDay4 = $("#remoteBackupWeekDay4").is(':checked')? 1: 0;
	    var weekDay5 = $("#remoteBackupWeekDay5").is(':checked')? 1: 0;
	    var weekDay6 = $("#remoteBackupWeekDay6").is(':checked')? 1: 0;
	    var weekDay7 = $("#remoteBackupWeekDay7").is(':checked')? 1: 0;
	    var realTimeBackup = $("#remoteRealTimeBackupEnable").is(':checked')? 1: 0;
			
		var remoteBackupConfig = 
		"{" +
			"backupTime:" + backupTime + ","  + 
			"weekDay1:" + weekDay1 +"," + 
			"weekDay2:" + weekDay2 +"," + 
			"weekDay3:" + weekDay3 +"," + 
			"weekDay4:" + weekDay4 +"," + 
			"weekDay5:" + weekDay5 +"," + 
			"weekDay6:" + weekDay6 +"," + 
			"weekDay7:" + weekDay7 +"," + 
			"realTimeBackup:" + realTimeBackup + "," +
			"remoteStorage:\"" + remoteStorage + "\"" +
		"}";
		return remoteBackupConfig;
	}
	
	function getRemoteBackupRemoteStorageConfig()
	{
		var protocol = $("#remoteBackupStorageProtocol").val();
		console.log("getRemoteBackupRemoteStorageConfig protocol:" + protocol);
		if(protocol == undefined || protocol == "")
		{
			return "";
		}
		
		var prefix = "";
		switch(protocol)
		{
		case "svn":
			prefix = "svn://";
			break;
		case "git":
			prefix = "git://";
			break;
		case "mxsdoc":
			prefix = "mxsdoc://";
			break;
		}
		
	    var remoteStorage = $("#remoteBackupStorage").val();	//remoteStorage
	    if(remoteStorage != undefined && remoteStorage != "")
		{
	    	remoteStorage = prefix + remoteStorage;
		}
	    console.log("getRemoteBackupRemoteStorageConfig remoteStorage:" + remoteStorage);
		return remoteStorage;
	}		
	
</script>