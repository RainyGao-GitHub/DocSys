
<script type="text/javascript">
	var shareId = null;
	function DocSharePageInit(id, docName, url)
	{
		shareId = id;
		$("#shareLink").val(url);
	}
	
	function showDocShare(text){
		$(".docShareModal").fadeIn("slow");
	}
	
	function closeDocShare(){
		$(".docShareModal").fadeOut("slow");
	}
	
	//登录按键处理函数
	function updateDocShare(){
		console.log("updateDocShare() shareId:" + shareId);
		
		var sharePwd;
		var shareHours;
		var addEn;
		var deleteEn;
		var editEn;
		
    	$.ajax({
             url : "http://dw.gofreeteam.com/DocSystem/Doc/updateDocShare.do",
             type : "post",
             dataType : "json",
             data : {
            	shareId : shareId,
            	isAdmin : 0,
            	access : 1,
            	addEn : addEn,
            	deleteEn : deleteEn,
            	editEn : editEn,
            	heritable : 1,     
            	sharePwd : sharePwd,
            	shareHours : shareHours,
             },
             success : function (ret) {
             	if( "ok" == ret.status){
            		bootstrapQ.msg({
    					msg : '保存成功！',
    					type : 'success',
    					time : 1000,
    				});
            		closeDocShare();
            		return;
	            }
                else
                {
            		bootstrapQ.msg({
    					msg : '保存失败:' + ret.MsgInfo,
    					type : 'danger',
    					time : 1000,
    				});
            		return false;
                }
            },
            error : function () {
        		bootstrapQ.msg({
					msg : '保存失败:服务器异常',
					type : 'danger',
					time : 1000,
				});
	            return false;
            }
        });
		return true;
    }
</script>

<div class="form-horizontal">
    <div class="form-group">
        <label class="col-sm-2 control-label">分享链接</label>
        <div class="col-sm-10">
            <input type="text" id="shareLink" name="shareLink" class="form-control"  maxlength="400"/>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-2 control-label">提取密码</label>
        <div class="col-sm-10">
            <input type="text" id="sharePwd" name="sharePwd" class="form-control"  maxlength="40" placeholder="提取密码" />
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-2 control-label">有效时间</label>
        <div class="col-sm-10">
            <select class="form-control" name="shareHours" onchange="doSelectExpireTime();" style="width: 100%">   
            	<option value="1" >永久有效</option>
            	<option value="2" selected="selected">7天</option>
            	<option value="3">1天</option>
            </select>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-2 control-label">权限设置</label>
        <div class="col-sm-10" style="margin-top:0.5em;">
	        <input name="downloadEn" onclick="disableDownload(this);" type="checkbox" >
				<span class="p5">禁止下载</span>
			</input>
			<input name="addEn" onclick="enableAdd(this);" type="checkbox" style="margin-left:1em;">
				<span class="p5">允许上传</span>
			</input>
			<input name="editEn" onclick="enableAdd(this);" type="checkbox" style="margin-left:1em;">
				<span class="p5">允许修改</span>
			</input>
			<input name="deleteEn" onclick="enableAdd(this);" type="checkbox" style="margin-left:1em;">
				<span class="p5">允许删除</span>
			</input>
		</div>
    </div>    
	<div class="form-group">
	    <div class="col-sm-12 text-center">
	        <button  id="submit" type="button" class="btn btnPrimary" onclick="updateDocShare();" style="width: 288px;height: 42px;">保存</button>
		</div>
	</div>
</div>
